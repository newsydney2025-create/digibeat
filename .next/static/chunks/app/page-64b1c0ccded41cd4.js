(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1355:function(e,t,r){Promise.resolve().then(r.bind(r,5709))},2958:function(e,t,r){"use strict";r.d(t,{DJ:function(){return s},Q2:function(){return u},WI:function(){return l},Wv:function(){return c},fetchDailyVideoBreakdown:function(){return i},o:function(){return a},pO:function(){return o},yZ:function(){return d}}),r(3079);var n=r(2119),a=(0,n.$)("744ac6272c1421108303e99710c1d60810045b91"),s=(0,n.$)("81f22211fa84bcdd2c67a66356e0d44e7dc6b531"),o=(0,n.$)("9219ea2b2cea1128bc0bff1ef0b94fda9d50ad42"),l=(0,n.$)("6f55f524f835e4d67c975ffa8506f6dcbcd5dc26");(0,n.$)("a6504655bc7204509ac2a84aebbca42cd731f67d"),(0,n.$)("c270e7cfb723aecfc54376bf4afdceec1eb84f86"),(0,n.$)("85fead08dbe93a9eacf6c37c330d81e9b066b348");var i=(0,n.$)("402351304280ad803702918ca0fe57280b42eb67"),c=(0,n.$)("a6686b75885c0c6fba5404716d34027f7cc5572e"),d=(0,n.$)("e013557a414f5aa88c094e25f715fa2dafe32a2f"),u=(0,n.$)("cc048a21d4319d52c6956955d6b7419a0c0888b4")},5709:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var n=r(7437),a=r(2265);function s(){let e=(0,a.useRef)(null),t=(0,a.useRef)([]),r=(0,a.useRef)();return(0,a.useEffect)(()=>{let n=e.current;if(!n)return;let a=n.getContext("2d");if(!a)return;let s=()=>{let e=n.width=window.innerWidth,r=n.height=window.innerHeight;t.current=Array.from({length:60},()=>({x:Math.random()*e,y:Math.random()*r,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,size:2*Math.random(),color:Math.random()>.5?"rgba(0, 243, 255,":"rgba(188, 19, 254,"}))},o=()=>{let e=n.width,s=n.height;a.clearRect(0,0,e,s),t.current.forEach((r,n)=>{r.x+=r.vx,r.y+=r.vy,(r.x<0||r.x>e)&&(r.vx*=-1),(r.y<0||r.y>s)&&(r.vy*=-1),a.beginPath(),a.arc(r.x,r.y,r.size,0,2*Math.PI),a.fillStyle=r.color+"0.5)",a.fill();for(let e=n;e<t.current.length;e++){let n=t.current[e],s=Math.hypot(r.x-n.x,r.y-n.y);s<120&&(a.beginPath(),a.strokeStyle="rgba(255, 255, 255, ".concat(.05-s/2400,")"),a.moveTo(r.x,r.y),a.lineTo(n.x,n.y),a.stroke())}}),r.current=requestAnimationFrame(o)},l=()=>{s()};return s(),o(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l),r.current&&cancelAnimationFrame(r.current)}},[]),(0,n.jsx)("canvas",{ref:e,className:"fixed top-0 left-0 w-full h-full -z-10"})}function o(e){let{sessionId:t,onStart:r}=e,[o,l]=(0,a.useState)(!1),i=async()=>{l(!0),await new Promise(e=>setTimeout(e,1500)),r()};return o?(0,n.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-50 font-mono",children:(0,n.jsxs)("div",{className:"w-full max-w-md p-8",children:[(0,n.jsxs)("div",{className:"flex justify-between text-cyan-400 text-xs mb-2",children:[(0,n.jsx)("span",{children:"ESTABLISHING UPLINK"}),(0,n.jsx)("span",{className:"animate-pulse",children:"CONNECTED"})]}),(0,n.jsx)("div",{className:"loader-bar mb-4",children:(0,n.jsx)("div",{className:"loader-fill"})}),(0,n.jsxs)("div",{className:"text-xs text-gray-500 space-y-1 h-24 overflow-hidden flex flex-col justify-end",children:[(0,n.jsx)("div",{className:"text-green-500",children:"> Handshaking with analytics_api_v1..."}),(0,n.jsxs)("div",{className:"text-gray-400",children:["> Retrieving dataset (ID: #",t,")"]}),(0,n.jsx)("div",{className:"text-gray-400",children:"> Parsing JSON stream..."}),(0,n.jsx)("div",{className:"text-cyan-500",children:"> DECRYPTING ANALYTICS..."})]})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s,{}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center font-[Outfit] p-4",children:(0,n.jsxs)("div",{className:"text-center group w-full max-w-4xl relative",children:[(0,n.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] border border-white/5 rounded-full animate-spin-slow pointer-events-none"}),(0,n.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] border border-cyan-500/10 rounded-full animate-reverse-spin pointer-events-none"}),(0,n.jsxs)("div",{className:"inline-flex items-center gap-3 mb-6 px-4 py-1.5 rounded-full border border-white/10 bg-black/40 backdrop-blur-md hover:border-cyan-500/50 transition-colors cursor-default",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),(0,n.jsx)("div",{className:"text-sm font-mono text-cyan-400 tracking-[0.2em]",children:"DASHBOARD_V8.2"})]}),(0,n.jsx)("h1",{className:"text-8xl md:text-[10rem] font-extrabold text-white tracking-tighter mb-6 glitch-text leading-none select-none","data-text":"DIGIPARK",children:"DIGIPARK"}),(0,n.jsxs)("p",{className:"text-gray-400 font-mono text-sm md:text-lg mb-12 tracking-wide opacity-80 max-w-xl mx-auto",children:["QUANTUM ANALYTICS MODULE ",(0,n.jsx)("br",{}),(0,n.jsxs)("span",{className:"text-gray-600",children:["DATA UPLINK: ",t]})]}),(0,n.jsxs)("button",{onClick:i,className:"neon-btn relative inline-flex items-center justify-center px-16 py-6 bg-white/5 hover:bg-white/10 border border-white/20 hover:border-cyan-400 text-white text-xl font-bold tracking-widest uppercase transition-all duration-300 group",children:[(0,n.jsx)("span",{className:"relative z-10 group-hover:text-cyan-300 transition-colors",children:"INITIALIZE SYSTEM"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-cyan-500/10 scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"})]})]})})]})}function l(e){let{sessionId:t,onLogout:r}=e;return(0,n.jsxs)("header",{className:"glass-panel p-4 rounded-xl flex justify-between items-center shrink-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded bg-gradient-to-br from-cyan-600 to-blue-700 flex items-center justify-center text-white shadow-lg shadow-cyan-500/20",children:(0,n.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,n.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,n.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,n.jsx)("path",{d:"M2 12l10 5 10-5"})]})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-xl font-bold text-white leading-none tracking-wide",children:["DIGIPARK ",(0,n.jsx)("span",{className:"text-cyan-400 font-light",children:"ANALYTICS"})]}),(0,n.jsxs)("div",{className:"text-[10px] font-mono text-gray-500 mt-1 flex items-center gap-2",children:[(0,n.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),"LIVE DATA STREAM"]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("div",{className:"hidden md:block text-right mr-4",children:[(0,n.jsx)("div",{className:"text-[10px] text-gray-500",children:"SESSION ID"}),(0,n.jsxs)("div",{className:"text-xs font-mono text-cyan-300",children:["#",t]})]}),(0,n.jsx)("button",{onClick:r,className:"w-10 h-10 rounded-full border border-white/10 flex items-center justify-center hover:bg-white/10 hover:text-white transition-colors",children:(0,n.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,n.jsx)("path",{d:"M18.36 6.64A9 9 0 1 1 5.64 6.64"}),(0,n.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})})]})]})}function i(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function c(e){return new Date("number"==typeof e?1e3*e:e).toLocaleDateString("en-US",{month:"numeric",day:"numeric"})}let d=["#00f3ff","#bc13fe","#fdd835","#0aff60","#ff5e00","#ff0055"];function u(e){return d[e%d.length]}let x=[{key:"playCount",label:"Views",icon:"eye",color:"#00f3ff"},{key:"diggCount",label:"Likes",icon:"heart",color:"#bc13fe"},{key:"commentCount",label:"Comments",icon:"chat",color:"#0aff60"},{key:"shareCount",label:"Shares",icon:"share",color:"#fdd835"}];function h(e){let{accounts:t,videos:r,selectedAccounts:s,onToggleAccount:o,onToggleAll:l,hoveredAccount:c=null,onAccountHover:d,groups:x=[],onOpenGroupManager:h,onSelectGroup:m}=e,[f,p]=(0,a.useState)([]),g=e=>r.filter(t=>t.account_id===e).reduce((e,t)=>e+t.play_count,0),b=e=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},y=s.length===t.length,w=new Set(x.flatMap(e=>e.members||[])),v=t.filter(e=>!w.has(e.id)),j=(e,t)=>{let r=s.includes(e.id),a=c===e.id,l=u(t);return(0,n.jsxs)("div",{onClick:()=>o(e.id),onMouseEnter:()=>null==d?void 0:d(e.id),onMouseLeave:()=>null==d?void 0:d(null),className:"p-2 rounded-lg border transition-all cursor-pointer group relative overflow-hidden ".concat(a?"bg-cyan-500/20 border-cyan-500/50 scale-[1.02]":r?"bg-white/5 border-white/10":"bg-transparent border-transparent opacity-50"),children:[(0,n.jsx)("div",{className:"absolute left-0 top-2 bottom-2 w-0.5 rounded-r-full transition-all",style:{backgroundColor:r?l:"transparent",boxShadow:a?"0 0 8px ".concat(l):"none"}}),(0,n.jsxs)("div",{className:"flex items-center gap-2 pl-2",children:[(0,n.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-[8px] font-bold border transition-all ".concat(a?"bg-cyan-500/30 border-cyan-400 text-cyan-300":"bg-gray-800 border-white/10 text-gray-400"),children:e.username.substring(0,2).toUpperCase()}),(0,n.jsxs)("div",{className:"overflow-hidden flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"text-[10px] font-bold truncate transition-colors ".concat(a?"text-cyan-300":"text-gray-200 group-hover:text-cyan-300"),children:["@",e.username]}),(0,n.jsx)("div",{className:"text-[8px] text-gray-600 font-mono",children:i(g(e.id))})]})]})]},e.id)};return(0,n.jsxs)("div",{className:"glass-panel rounded-xl flex flex-col overflow-hidden w-48 shrink-0",children:[(0,n.jsxs)("div",{className:"p-3 border-b border-white/5 bg-white/5 flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[10px] font-bold text-gray-300 tracking-wider",children:"ACCOUNTS"}),(0,n.jsxs)("div",{className:"flex gap-1",children:[h&&(0,n.jsx)("button",{onClick:h,className:"text-[10px] text-purple-400 hover:text-white transition-colors px-1",title:"Manage Groups",children:"⊞"}),(0,n.jsx)("button",{onClick:l,className:"text-[10px] text-cyan-400 hover:text-white transition-colors",children:y?"HIDE":"ALL"})]})]}),(0,n.jsxs)("div",{className:"overflow-y-auto p-1.5 space-y-1 custom-scroll flex-1",children:[x.map(e=>{let r=t.filter(t=>(e.members||[]).includes(t.id)),a=f.includes(e.id),o=r.every(e=>s.includes(e.id));return(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>b(e.id),children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:e.color}}),(0,n.jsx)("span",{className:"text-[10px] font-bold text-white flex-1 truncate",children:e.name}),(0,n.jsx)("span",{className:"text-[8px] text-gray-500",children:r.length}),(0,n.jsx)("button",{onClick:t=>{t.stopPropagation(),null==m||m(e.id)},className:"text-[8px] px-1.5 py-0.5 rounded transition-colors ".concat(o?"bg-cyan-500/30 text-cyan-300":"bg-white/10 text-gray-400 hover:text-white"),children:o?"✓":"SEL"}),(0,n.jsx)("span",{className:"text-[10px] text-gray-500 transition-transform ".concat(a?"rotate-180":""),children:"▼"})]}),a&&(0,n.jsx)("div",{className:"pl-3 mt-1 space-y-1 animate-in slide-in-from-top-2 duration-200",children:r.map((e,t)=>j(e,t))})]},e.id)}),v.length>0&&x.length>0&&(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)("div",{className:"text-[8px] text-gray-600 uppercase tracking-wider px-2 py-1",children:"Ungrouped"})}),v.map((e,t)=>j(e,t+10*x.length))]})]})}let m={eye:(0,n.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"currentColor",children:(0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}),heart:(0,n.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"currentColor",children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),chat:(0,n.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"currentColor",children:(0,n.jsx)("path",{d:"M21 6h-2V3H3v15h4v4l4-4h5l5-5V6zm-7 8H7v-2h7v2zm3-4H7V8h10v2z"})}),share:(0,n.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"currentColor",children:(0,n.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})})};function f(e){let{totals:t,currentMetric:r,onSelectMetric:a}=e;return(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 shrink-0",children:x.map(e=>{let s=r===e.key,o=t[e.key];return(0,n.jsxs)("button",{onClick:()=>a(e.key),className:"metric-card h-40 p-5 rounded-2xl flex flex-col justify-between cursor-pointer bg-black/20 group text-left ".concat(s?"active":""),style:{"--card-color":e.color,"--card-glow":e.color+"40"},children:[(0,n.jsx)("div",{className:"icon-bg w-32 h-32",style:{color:e.color},children:m[e.icon]}),(0,n.jsxs)("div",{className:"flex justify-between items-start z-10",children:[(0,n.jsx)("span",{className:"text-xs font-mono font-bold tracking-widest text-gray-400 uppercase group-hover:text-white transition-colors",children:e.label}),(0,n.jsx)("div",{className:"p-2 rounded-full bg-white/5 group-hover:bg-white/10 transition-colors",children:(0,n.jsx)("div",{className:"w-6 h-6 transition-colors ".concat(s?"":"text-gray-500"),style:{color:s?e.color:void 0},children:m[e.icon]})})]}),(0,n.jsx)("div",{className:"text-5xl font-bold text-white font-mono tracking-tight z-10 drop-shadow-md",children:i(o)})]},e.key)})})}var p=r(7655);function g(e){let{snapshots:t,accounts:r,selectedAccounts:s,currentMetric:o,timeRange:l,onDataClick:d,viewMode:u,showAverage:x=!1,hoveredAccount:h=null,onAccountHover:m}=e,f=(0,a.useRef)(null),g=(0,a.useRef)(null),b=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=()=>{var e;null===(e=g.current)||void 0===e||e.resize()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let y=(0,a.useCallback)(e=>{switch(o){case"playCount":return e.total_views;case"diggCount":return e.total_likes;case"commentCount":return e.total_comments;case"shareCount":return e.total_shares;default:return 0}},[o]);return(0,a.useEffect)(()=>{if(!f.current)return;if(!g.current){g.current=p.S1(f.current),g.current.on("mouseover","series",e=>{if(m&&e.seriesName&&"Average"!==e.seriesName){let t=r.find(t=>t.username===e.seriesName);t&&m(t.id)}}),g.current.on("mouseout","series",()=>{m&&m(null)}),g.current.on("click",e=>{d&&e.seriesName&&"Average"!==e.seriesName&&e.name&&d(e.seriesName,e.name)});let e=!1;g.current.on("updateAxisPointer",t=>{g.current&&g.current.dispatchAction({type:"downplay"}),null!==b.current&&g.current&&!e&&(e=!0,g.current.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:b.current}),setTimeout(()=>{e=!1},100))})}window.lockTooltipAxis=e=>{b.current=e},window.unlockTooltipAxis=()=>{b.current=null},window.chartHighlightSeries=e=>{g.current&&(e?(g.current.dispatchAction({type:"downplay"}),g.current.dispatchAction({type:"highlight",seriesName:e})):g.current.dispatchAction({type:"downplay"}))};let e=t.filter(e=>s.includes(e.account_id)),n=Array.from(new Set(e.map(e=>e.date))).sort((e,t)=>new Date(e).getTime()-new Date(t).getTime()),a={};s.forEach(t=>{let r={};e.filter(e=>e.account_id===t).forEach(e=>{r[e.date]=y(e)}),a[t]=r});let o=e=>n.map((t,r)=>{if("total"===u)return e[t]||0;{if(0===r)return 0;let a=n[r-1];return Math.max(0,(e[t]||0)-(e[a]||0))}}),w=n.map((e,t)=>{let r=0,o=0;return s.forEach(s=>{let l=a[s];if("total"===u)void 0!==l[e]&&(r+=l[e],o++);else{if(0===t)return;let a=n[t-1],s=l[e]||0,i=l[a]||0;r+=Math.max(0,s-i),o++}}),o>0?Math.round(r/o):0}),v=e=>{let t=[];if(e.length<7)return t;for(let r=7;r<e.length;r++){let n=e.slice(r-7,r).reduce((e,t)=>e+t,0)/7,a=e[r];n>0&&(a>2.5*n?t.push({xAxis:r,yAxis:a,type:"spike"}):a<.3*n&&a>0&&t.push({xAxis:r,yAxis:a,type:"drop"}))}return t},j=[];if(s.forEach(e=>{let t=r.find(t=>t.id===e);if(!t)return;let n=e.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%360,s="hsl(".concat(n,", 70%, 60%)"),l="#333",i=o(a[e]),c=h===e,d=x&&!c&&null===h,u=null!==h&&!c;j.push({name:t.username,type:"line",smooth:!0,showSymbol:!x||c,symbolSize:c?8:4,lineStyle:{width:c?4:x?1.5:3,color:d?l:u?"hsla(".concat(n,", 30%, 50%, 0.2)"):s},itemStyle:{color:d?l:s},areaStyle:x&&!c?void 0:{color:new p.Q.o(0,0,0,1,[{offset:0,color:"hsla(".concat(n,", 70%, 60%, ").concat(c?.4:.15,")")},{offset:1,color:"transparent"}])},emphasis:{disabled:!1,focus:"series",lineStyle:{width:5,color:s},itemStyle:{color:s,borderWidth:2,borderColor:"#fff"}},z:c?10:x?1:5,data:i,markPoint:!x||c?{symbol:"circle",symbolSize:12,data:v(i).map(e=>({coord:[e.xAxis,e.yAxis],itemStyle:{color:"spike"===e.type?"#22c55e":"#ef4444"},label:{show:!1}}))}:void 0})}),x&&s.length>1){let e=v(w);j.push({name:"Average",type:"line",smooth:!0,showSymbol:!0,symbolSize:6,lineStyle:{width:4,color:"#22d3ee"},itemStyle:{color:"#22d3ee"},areaStyle:{color:new p.Q.o(0,0,0,1,[{offset:0,color:"rgba(34, 211, 238, 0.3)"},{offset:1,color:"transparent"}])},emphasis:{focus:"series",lineStyle:{width:5,color:"#22d3ee"},itemStyle:{color:"#22d3ee",borderWidth:2,borderColor:"#fff"}},z:20,data:w,markPoint:{symbol:"circle",symbolSize:14,data:e.map(e=>({coord:[e.xAxis,e.yAxis],itemStyle:{color:"spike"===e.type?"#22c55e":"#ef4444",borderColor:"#fff",borderWidth:2},label:{show:!1}}))}})}window.chartDrillDown=(e,t)=>{d&&d(e,t)},window.chartHighlight=e=>{m&&m(e)};let N={"3D":3,"7D":7,"30D":30,"90D":90}[l]||30,k=n.length<=N?0:100-N/n.length*100,S={backgroundColor:"transparent",tooltip:{trigger:"axis",enterable:!0,backgroundColor:"rgba(10,10,10,0.95)",borderColor:"rgba(34,211,238,0.3)",borderWidth:1,padding:0,textStyle:{color:"#fff",fontSize:12},position:function(e,t,r,n,a){if(!t||!t[0]||!g.current)return[e[0]+10,40];let s=t[0].dataIndex,o=g.current.convertToPixel({xAxisIndex:0},s),l=o+10,i=a.contentSize[0];return l+i>a.viewSize[0]?[o-i-10,40]:[l,40]},axisPointer:{type:"line",snap:!0,lineStyle:{color:"rgba(34,211,238,0.6)",width:2}},formatter:e=>{if(!Array.isArray(e)||0===e.length)return"";let t=e[0].axisValue,n=[...e].sort((e,t)=>"Average"===e.seriesName?-1:"Average"===t.seriesName?1:(t.value||0)-(e.value||0)),a={};r.forEach(e=>{a[e.username]=e.id});let s=e[0].dataIndex,o='\n                        <div \n                            style="padding: 12px 8px 8px 12px;"\n                            onmouseenter="window.lockTooltipAxis && window.lockTooltipAxis('.concat(s,')"\n                            onmouseleave="window.unlockTooltipAxis && window.unlockTooltipAxis()"\n                        >\n                            <div style="font-weight:bold; color:#22d3ee; margin-bottom:10px; font-size:14px; padding-right:8px;">').concat(t,'</div>\n                            <div style="max-height: 280px; overflow-y: auto; padding-right: 8px;">\n                    ');return n.forEach(e=>{let r=i(Number(e.value)),n="Average"===e.seriesName;a[e.seriesName];let s=n?"":"onmouseover=\"window.chartHighlightSeries && window.chartHighlightSeries('".concat(e.seriesName,"'); this.style.background='rgba(34,211,238,0.15)';\""),l=n?"":"onclick=\"window.chartDrillDown && window.chartDrillDown('".concat(e.seriesName,"', '").concat(t,"')\"");o+='\n                            <div \n                                style="display:flex; align-items:center; justify-content:space-between; padding:6px 8px; gap:20px; border-radius:4px; cursor:'.concat(n?"default":"pointer",'; transition: background 0.15s; margin-bottom:2px;"\n                                ').concat(s,"\n                                ").concat(n?"":"onmouseout=\"window.chartHighlightSeries && window.chartHighlightSeries(null); this.style.background='transparent';\"","\n                                ").concat(l,'\n                            >\n                                <div style="display:flex; align-items:center; gap:8px; min-width:0;">\n                                    <span style="width:8px; height:8px; border-radius:50%; background:').concat(e.color,'; flex-shrink:0;"></span>\n                                    <span style="white-space:nowrap; overflow:hidden; text-overflow:ellipsis; ').concat(n?"font-weight:600; color:#22d3ee;":"color:#ccc;",'">').concat(e.seriesName,'</span>\n                                </div>\n                                <span style="font-family:monospace; font-weight:600; color:#fff; flex-shrink:0;">').concat(r,"</span>\n                            </div>\n                        ")}),o+='\n                            </div>\n                            <div style="color:#555; font-size:9px; text-align:center; margin-top:8px; padding-top:6px; border-top:1px solid #333;">\n                                点击账号查看视频详情\n                            </div>\n                        </div>\n                    '}},legend:{show:!1},grid:{left:"2%",right:"2%",bottom:"10%",top:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:n.map(e=>c(e)),axisLine:{lineStyle:{color:"#333"}},axisLabel:{color:"#666",fontSize:10}},yAxis:{type:"value",splitLine:{lineStyle:{color:"#222"}},axisLabel:{color:"#666",fontSize:10,formatter:e=>i(e)}},dataZoom:[{type:"inside",xAxisIndex:0,start:k,end:100},{type:"slider",xAxisIndex:0,start:k,end:100,height:20,bottom:0,borderColor:"transparent",backgroundColor:"#111",fillerColor:"rgba(34, 211, 238, 0.2)",handleStyle:{color:"#22d3ee",borderColor:"#22d3ee"},textStyle:{color:"#666"}}],series:j};return g.current.setOption(S,!0),()=>{delete window.chartDrillDown}},[t,r,s,o,l,u,d,x,h,m,y]),(0,a.useEffect)(()=>{if(g.current){if(h){let e=r.find(e=>e.id===h);e&&g.current.dispatchAction({type:"highlight",seriesName:e.username})}else g.current.dispatchAction({type:"downplay"})}},[h,r]),(0,n.jsx)("div",{ref:f,className:"w-full h-full min-h-[250px]"})}function b(e){let{snapshots:t,accounts:r,selectedAccounts:s,currentMetric:o,timeRange:l,viewMode:i,onAccountClick:d}=e,x=(0,a.useRef)(null),h=(0,a.useRef)(new Map),m=(0,a.useCallback)(e=>{switch(o){case"playCount":return e.total_views;case"diggCount":return e.total_likes;case"commentCount":return e.total_comments;case"shareCount":return e.total_shares;default:return 0}},[o]),f=(0,a.useMemo)(()=>Array.from(new Set(t.map(e=>e.date))).sort((e,t)=>new Date(e).getTime()-new Date(t).getTime()),[t]),g={"3D":3,"7D":7,"30D":30,"90D":90}[l]||30,b=(0,a.useMemo)(()=>f.slice(-g),[f,g]);(0,a.useEffect)(()=>()=>{h.current.forEach(e=>e.dispose()),h.current.clear()},[]),(0,a.useEffect)(()=>{x.current&&(s.map(e=>r.find(t=>t.id===e)).filter(Boolean).forEach((e,r)=>{let n="mini-chart-".concat(e.id),a=document.getElementById(n);if(!a)return;let s=h.current.get(e.id);s||(s=p.S1(a),h.current.set(e.id,s));let o=t.filter(t=>t.account_id===e.id),l={};o.forEach(e=>{l[e.date]=m(e)});let d=b.map((e,t)=>{if("total"===i)return l[e]||0;{if(0===t)return 0;let r=b[t-1];return Math.max(0,(l[e]||0)-(l[r]||0))}}),x=[];if(d.length>=7)for(let e=7;e<d.length;e++){let t=d.slice(e-7,e).reduce((e,t)=>e+t,0)/7;t>0&&d[e]>2.5*t&&x.push(e)}let f=u(r),g={backgroundColor:"transparent",grid:{left:5,right:5,top:5,bottom:5,containLabel:!1},xAxis:{type:"category",data:b.map(e=>c(e)),show:!1},yAxis:{type:"value",show:!1},series:[{type:"line",smooth:!0,showSymbol:!1,lineStyle:{width:2,color:f},areaStyle:{color:new p.Q.o(0,0,0,1,[{offset:0,color:f.replace(")",", 0.4)").replace("hsl(","hsla(").replace("rgb(","rgba(")},{offset:1,color:"transparent"}])},data:d,markPoint:x.length>0?{symbol:"circle",symbolSize:6,data:x.map(e=>({coord:[e,d[e]],itemStyle:{color:"#22c55e"}}))}:void 0}]};s.setOption(g,!0)}),h.current.forEach((e,t)=>{s.includes(t)||(e.dispose(),h.current.delete(t))}))},[t,r,s,o,b,i,m]),(0,a.useEffect)(()=>{let e=()=>{h.current.forEach(e=>e.resize())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let y=s.map(e=>r.find(t=>t.id===e)).filter(Boolean);return(0,n.jsx)("div",{ref:x,className:"w-full h-full overflow-y-auto custom-scrollbar",children:(0,n.jsx)("div",{className:"grid grid-cols-4 gap-3 p-2",children:y.map((e,t)=>{let r=u(t);return(0,n.jsxs)("div",{onClick:()=>null==d?void 0:d(e.id),className:"group cursor-pointer bg-white/5 rounded-lg border border-white/10 hover:border-cyan-500/50 hover:bg-white/10 transition-all overflow-hidden",children:[(0,n.jsxs)("div",{className:"px-2 py-1.5 border-b border-white/5 flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:r}}),(0,n.jsxs)("span",{className:"text-[10px] font-bold text-gray-300 truncate",children:["@",e.username]})]}),(0,n.jsx)("div",{id:"mini-chart-".concat(e.id),className:"w-full h-[80px]"})]},e.id)})})})}function y(e){let{videos:t,accounts:r,currentMetric:s,onVideoClick:o}=e,l=(0,a.useRef)(null),c=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!l.current)return;c.current=p.S1(l.current,"dark"),c.current.on("click",e=>{let r=t.find(t=>{var r;return null===(r=t.description)||void 0===r?void 0:r.includes(e.name.replace("...",""))});(null==r?void 0:r.web_video_url)&&o(r.web_video_url)});let e=()=>{var e;null===(e=c.current)||void 0===e||e.resize()};return window.addEventListener("resize",e),()=>{var t;window.removeEventListener("resize",e),null===(t=c.current)||void 0===t||t.dispose()}},[]),(0,a.useEffect)(()=>{if(!c.current||0===t.length)return;let e={playCount:"play_count",diggCount:"digg_count",commentCount:"comment_count",shareCount:"share_count",collectCount:"collect_count"},n=[...t].sort((t,r)=>(r[e[s]]||0)-(t[e[s]]||0)).slice(0,5),a=e=>{let t=r.findIndex(t=>t.id===e.account_id);return u(t>=0?t:0)};c.current.setOption({backgroundColor:"transparent",grid:{left:"0%",right:"15%",bottom:"0%",top:"0%",containLabel:!0},xAxis:{show:!1},yAxis:{type:"category",data:n.map(e=>e.description?e.description.substring(0,12)+"...":"Video"),axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#aaa",fontSize:10}},series:[{type:"bar",data:n.map(t=>({value:t[e[s]]||0,itemStyle:{color:a(t)}})),itemStyle:{borderRadius:[0,3,3,0]},label:{show:!0,position:"right",color:"#fff",formatter:e=>i(e.value)}}]},!0)},[t,r,s]),(0,n.jsx)("div",{ref:l,className:"w-full flex-1"})}function w(e){let{date:t,username:r,videos:a,onBack:s}=e;return(0,n.jsxs)("div",{className:"w-full flex flex-col h-full animate-in fade-in slide-in-from-right-4 duration-300",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-4 border-b border-white/5 pb-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("button",{onClick:s,className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg bg-cyan-500/10 border border-cyan-500/20 text-cyan-400 hover:bg-cyan-500/20 hover:text-cyan-300 transition-all text-sm font-medium",children:[(0,n.jsx)("div",{className:"bg-cyan-500/20 p-1 rounded-full group-hover:bg-cyan-500/30 transition-colors",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"m15 18-6-6 6-6"})})}),"Back to Trend"]}),(0,n.jsx)("div",{className:"h-4 w-px bg-white/10"}),(0,n.jsx)("div",{children:(0,n.jsxs)("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[t," Analysis",(0,n.jsxs)("span",{className:"text-[10px] font-normal text-cyan-400 bg-cyan-950/30 px-1.5 py-0.5 rounded border border-cyan-500/20",children:["@",r]})]})})]})}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2",children:(0,n.jsxs)("table",{className:"w-full text-left text-xs",children:[(0,n.jsx)("thead",{className:"sticky top-0 bg-[#0A0A0A]/95 backdrop-blur-sm z-10",children:(0,n.jsxs)("tr",{className:"border-b border-white/5 text-gray-500 uppercase font-mono tracking-wider",children:[(0,n.jsx)("th",{className:"py-2 pl-2",children:"Video"}),(0,n.jsx)("th",{className:"py-2",children:"Posted"}),(0,n.jsx)("th",{className:"py-2 text-right",children:"Views"}),(0,n.jsx)("th",{className:"py-2 text-right",children:"Likes"}),(0,n.jsx)("th",{className:"py-2 text-right",children:"Comments"}),(0,n.jsx)("th",{className:"py-2 text-right pr-2",children:"Shares"})]})}),(0,n.jsxs)("tbody",{className:"divide-y divide-white/5",children:[a.map(e=>(0,n.jsxs)("tr",{className:"group hover:bg-white/5 transition-colors",children:[(0,n.jsx)("td",{className:"py-3 pl-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-8 h-10 bg-gray-800 rounded overflow-hidden shrink-0 border border-white/10 group-hover:border-cyan-500/50 transition-colors relative",children:e.cover?(0,n.jsx)("img",{src:e.cover,alt:"Cover",className:"w-full h-full object-cover"}):(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),(0,n.jsx)("circle",{cx:"9",cy:"9",r:"2"}),(0,n.jsx)("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]})})}),(0,n.jsx)("div",{className:"flex flex-col gap-1 min-w-0",children:(0,n.jsx)("a",{href:e.web_video_url,target:"_blank",rel:"noreferrer",className:"text-white font-medium truncate max-w-[180px] hover:text-cyan-400 transition-colors",children:e.title||"Video ".concat(e.video_id)})})]})}),(0,n.jsx)("td",{className:"py-3 text-gray-400 whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString()}),(0,n.jsxs)("td",{className:"py-3 text-right font-mono text-cyan-400",children:["+",i(e.stats.views)]}),(0,n.jsxs)("td",{className:"py-3 text-right font-mono text-gray-300",children:["+",i(e.stats.likes)]}),(0,n.jsxs)("td",{className:"py-3 text-right font-mono text-gray-300",children:["+",i(e.stats.comments)]}),(0,n.jsxs)("td",{className:"py-3 text-right font-mono text-gray-300 pr-2",children:["+",i(e.stats.shares)]})]},e.video_id)),0===a.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,className:"py-8 text-center text-gray-500 italic",children:"No active videos found for this date."})})]})]})})]})}function v(e){let{videos:t,accounts:r,onVideoClick:s}=e,o=(0,a.useRef)(null),l=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!o.current)return;l.current=p.S1(o.current,"dark"),l.current.on("click",e=>{var t;let r=null===(t=e.data)||void 0===t?void 0:t[5];r&&s(r)});let e=()=>{var e;null===(e=l.current)||void 0===e||e.resize()};return window.addEventListener("resize",e),()=>{var t;window.removeEventListener("resize",e),null===(t=l.current)||void 0===t||t.dispose()}},[]),(0,a.useEffect)(()=>{if(!l.current||0===t.length)return;let e=e=>{var t;return(null===(t=r.find(t=>t.id===e))||void 0===t?void 0:t.username)||"unknown"},n=e=>{let t=r.findIndex(t=>t.id===e);return u(t>=0?t:0)},a=t.map(t=>{let r=t.digg_count+t.comment_count+t.share_count,n=t.play_count>0?r/t.play_count*100:0;return[t.play_count,parseFloat(n.toFixed(2)),r,e(t.account_id),t.description,t.web_video_url]});l.current.setOption({backgroundColor:"transparent",tooltip:{backgroundColor:"rgba(0,0,0,0.8)",borderColor:"#333",formatter:e=>'<b style="color:'.concat(e.color,'">@').concat(e.data[3],"</b><br>Views: ").concat(i(e.data[0]),"<br>Eng. Rate: ").concat(e.data[1],"%")},grid:{left:"10%",right:"10%",bottom:"15%",top:"10%"},xAxis:{type:"log",name:"Views",splitLine:{show:!1},axisLabel:{color:"#666"},nameTextStyle:{color:"#666"}},yAxis:{type:"value",name:"Rate %",axisLabel:{color:"#666"},nameTextStyle:{color:"#666"},splitLine:{lineStyle:{color:"#222"}}},series:[{type:"scatter",symbolSize:e=>Math.min(Math.max(5*Math.log(e[2]+1),5),30),itemStyle:{opacity:.8,color:e=>{var a;return n((null===(a=t.find(t=>{var n;return(null===(n=r.find(t=>t.username===e.data[3]))||void 0===n?void 0:n.id)===t.account_id}))||void 0===a?void 0:a.account_id)||null)}},data:a}]},!0)},[t,r]),(0,n.jsx)("div",{ref:o,className:"w-full flex-1"})}function j(e){let{videos:t}=e,r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!r.current)return;s.current=p.S1(r.current,"dark");let e=()=>{var e;null===(e=s.current)||void 0===e||e.resize()};return window.addEventListener("resize",e),()=>{var t;window.removeEventListener("resize",e),null===(t=s.current)||void 0===t||t.dispose()}},[]),(0,a.useEffect)(()=>{if(!s.current)return;let e={};t.forEach(t=>{(t.hashtags||[]).forEach(r=>{e[r]=(e[r]||0)+t.play_count})});let r=Object.entries(e).map(e=>{let[t,r]=e;return{name:t,value:r}}).sort((e,t)=>t.value-e.value).slice(0,5);s.current.setOption({backgroundColor:"transparent",grid:{left:"5%",right:"15%",bottom:"5%",top:"5%",containLabel:!0},xAxis:{type:"value",show:!1},yAxis:{type:"category",data:r.map(e=>"#"+e.name),axisLine:{show:!1},axisTick:{show:!1},inverse:!0,axisLabel:{color:"#666",fontSize:10}},series:[{type:"bar",data:r.map(e=>e.value),barWidth:8,itemStyle:{borderRadius:5,color:"#00f3ff"},label:{show:!0,position:"right",color:"#00f3ff",fontSize:10,formatter:e=>i(e.value)}}]},!0)},[t]),(0,n.jsx)("div",{ref:r,className:"w-full flex-1"})}function N(e){let{videos:t,accounts:r,selectedAccounts:s,currentMetric:o}=e,l=(0,a.useRef)(null),i=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!l.current)return;i.current=p.S1(l.current,"dark");let e=()=>{var e;null===(e=i.current)||void 0===e||e.resize()};return window.addEventListener("resize",e),()=>{var t;window.removeEventListener("resize",e),null===(t=i.current)||void 0===t||t.dispose()}},[]),(0,a.useEffect)(()=>{if(!i.current)return;let e={},n={playCount:"play_count",diggCount:"digg_count",commentCount:"comment_count",shareCount:"share_count",collectCount:"collect_count"};t.forEach(t=>{let a=r.find(e=>e.id===t.account_id);if(a&&s.includes(a.id)){let r=t[n[o]];e[a.username]=(e[a.username]||0)+(r||0)}});let a=Object.entries(e).map(e=>{let[t,n]=e,a=r.findIndex(e=>e.username===t);return{value:n,name:"@"+t,itemStyle:{color:u(a>=0?a:0)}}});i.current.setOption({backgroundColor:"transparent",tooltip:{trigger:"item",backgroundColor:"rgba(0,0,0,0.8)"},series:[{type:"pie",radius:["40%","70%"],center:["50%","50%"],itemStyle:{borderRadius:4,borderColor:"#000",borderWidth:2},label:{show:!0,color:"#fff",formatter:"{d}%",fontSize:10},data:a}]},!0)},[t,r,s,o]),(0,n.jsx)("div",{ref:l,className:"w-full flex-1"})}function k(e){let{videos:t,accounts:r}=e,a=[...t].sort((e,t)=>new Date(t.create_time||"1970-01-01").getTime()-new Date(e.create_time||"1970-01-01").getTime()).slice(0,50),s=e=>{var t;return(null===(t=r.find(t=>t.id===e))||void 0===t?void 0:t.username)||"Unknown"},o=e=>{e&&window.open(e,"_blank")};return(0,n.jsxs)("div",{className:"glass-panel rounded-xl overflow-hidden flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-white/5 flex justify-between items-center",children:[(0,n.jsxs)("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Latest Video Details"]}),(0,n.jsxs)("span",{className:"text-xs text-gray-600 font-mono",children:[t.length," videos loaded"]})]}),(0,n.jsx)("div",{className:"overflow-auto flex-1 custom-scrollbar",children:(0,n.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,n.jsx)("thead",{className:"bg-black/20 sticky top-0 z-10 backdrop-blur-sm",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"p-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Video"}),(0,n.jsx)("th",{className:"p-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account"}),(0,n.jsx)("th",{className:"p-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-right",children:"Views"}),(0,n.jsx)("th",{className:"p-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-right",children:"Likes"}),(0,n.jsx)("th",{className:"p-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-right",children:"Comments"}),(0,n.jsx)("th",{className:"p-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-right",children:"Shares"}),(0,n.jsx)("th",{className:"p-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-right",children:"Date"})]})}),(0,n.jsx)("tbody",{className:"divide-y divide-white/5",children:a.map(e=>{var t;return(0,n.jsxs)("tr",{onClick:()=>o(e.web_video_url),className:"hover:bg-white/5 cursor-pointer transition-colors group",children:[(0,n.jsx)("td",{className:"p-3 max-w-[200px]",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[e.cover_url&&(0,n.jsx)("img",{src:e.cover_url,alt:"cover",className:"w-8 h-10 object-cover rounded bg-gray-800"}),(0,n.jsx)("p",{className:"text-xs text-gray-300 truncate font-mono",children:e.description||"No description"})]})}),(0,n.jsxs)("td",{className:"p-3 text-xs text-cyan-400 font-medium",children:["@",s(e.account_id)]}),(0,n.jsx)("td",{className:"p-3 text-xs text-gray-300 text-right font-mono",children:i(e.play_count)}),(0,n.jsx)("td",{className:"p-3 text-xs text-gray-300 text-right font-mono",children:i(e.digg_count)}),(0,n.jsx)("td",{className:"p-3 text-xs text-gray-300 text-right font-mono",children:i(e.comment_count)}),(0,n.jsx)("td",{className:"p-3 text-xs text-gray-300 text-right font-mono",children:i(e.share_count)}),(0,n.jsx)("td",{className:"p-3 text-xs text-gray-500 text-right",children:e.create_time?new Date("number"==typeof(t=e.create_time)?1e3*t:t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"})]},e.id)})})]})})]})}var S=r(2958);let C=["#22d3ee","#a855f7","#f97316","#22c55e","#ec4899","#eab308","#3b82f6","#ef4444"];function _(e){let{accounts:t,isOpen:r,onClose:s,onGroupsChange:o}=e,[l,i]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[u,x]=(0,a.useState)(""),[h,m]=(0,a.useState)(C[0]),[f,p]=(0,a.useState)(null),[g,b]=(0,a.useState)([]);(0,a.useEffect)(()=>{r&&y()},[r]);let y=async()=>{d(!0);let e=await (0,S.Wv)();i(e),o(e),d(!1)},w=async()=>{if(!u.trim())return;let e=await (0,S.yZ)(u.trim(),h,g);e&&(i(t=>[...t,e]),o([...l,e]),x(""),b([]),m(C[(l.length+1)%C.length]))},v=async e=>{if(await (0,S.o)(e)){let t=l.filter(t=>t.id!==e);i(t),o(t)}},j=async e=>{if(await (0,S.Q2)(e,g)){let t=l.map(t=>t.id===e?{...t,members:g}:t);i(t),o(t),p(null),b([])}},N=e=>{p(e.id),b(e.members||[])},k=e=>{b(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return r?(0,n.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,n.jsxs)("div",{className:"bg-[#0A0A0A] border border-white/10 rounded-xl w-full max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-white/5 flex justify-between items-center",children:[(0,n.jsxs)("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,n.jsx)("span",{className:"w-1 h-6 bg-purple-500 rounded-full"}),"Account Groups"]}),(0,n.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors p-1",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:c?(0,n.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Loading..."}):(0,n.jsxs)(n.Fragment,{children:[l.map(e=>{var r;return(0,n.jsxs)("div",{className:"bg-white/5 rounded-lg border border-white/10 p-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,n.jsx)("span",{className:"font-bold text-white",children:e.name}),(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(null===(r=e.members)||void 0===r?void 0:r.length)||0," accounts)"]})]}),(0,n.jsx)("div",{className:"flex gap-2",children:f===e.id?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>j(e.id),className:"text-xs px-2 py-1 bg-green-500/20 text-green-400 rounded hover:bg-green-500/30",children:"Save"}),(0,n.jsx)("button",{onClick:()=>{p(null),b([])},className:"text-xs px-2 py-1 bg-gray-500/20 text-gray-400 rounded hover:bg-gray-500/30",children:"Cancel"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>N(e),className:"text-xs px-2 py-1 bg-cyan-500/20 text-cyan-400 rounded hover:bg-cyan-500/30",children:"Edit"}),(0,n.jsx)("button",{onClick:()=>v(e.id),className:"text-xs px-2 py-1 bg-red-500/20 text-red-400 rounded hover:bg-red-500/30",children:"Delete"})]})})]}),f===e.id?(0,n.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:t.map(e=>(0,n.jsxs)("button",{onClick:()=>k(e.id),className:"text-[10px] px-2 py-1 rounded border transition-all ".concat(g.includes(e.id)?"bg-cyan-500/30 border-cyan-500/50 text-cyan-300":"bg-black/40 border-white/10 text-gray-500 hover:text-white"),children:["@",e.username]},e.id))}):(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:(e.members||[]).map(e=>{let r=t.find(t=>t.id===e);return r?(0,n.jsxs)("span",{className:"text-[10px] px-2 py-0.5 bg-white/5 rounded text-gray-400",children:["@",r.username]},e):null})})]},e.id)}),(0,n.jsxs)("div",{className:"bg-white/5 rounded-lg border border-dashed border-white/20 p-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold text-gray-400 mb-3",children:"Create New Group"}),(0,n.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,n.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),placeholder:"Group name...",className:"flex-1 bg-black/40 border border-white/10 rounded px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-cyan-500/50"}),(0,n.jsx)("div",{className:"flex gap-1",children:C.map(e=>(0,n.jsx)("button",{onClick:()=>m(e),className:"w-8 h-8 rounded border-2 transition-all ".concat(h===e?"border-white scale-110":"border-transparent"),style:{backgroundColor:e}},e))})]}),!f&&(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Select accounts to add:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1 max-h-32 overflow-y-auto",children:t.map(e=>(0,n.jsxs)("button",{onClick:()=>k(e.id),className:"text-[10px] px-2 py-1 rounded border transition-all ".concat(g.includes(e.id)?"bg-cyan-500/30 border-cyan-500/50 text-cyan-300":"bg-black/40 border-white/10 text-gray-500 hover:text-white"),children:["@",e.username]},e.id))})]}),(0,n.jsx)("button",{onClick:w,disabled:!u.trim(),className:"w-full py-2 bg-purple-500/20 border border-purple-500/50 text-purple-300 rounded-lg hover:bg-purple-500/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-bold",children:"+ Create Group"})]})]})})]})}):null}function A(e){let{sessionId:t,accounts:s,videos:o,onLogout:i}=e,[c,d]=(0,a.useState)(s.map(e=>e.id)),[u,x]=(0,a.useState)("playCount"),[m,p]=(0,a.useState)("30D"),[C,A]=(0,a.useState)([]),[D,E]=(0,a.useState)([]),[M,L]=(0,a.useState)(!1);(0,a.useEffect)(()=>{s.length>0&&d(s.map(e=>e.id))},[s]),(0,a.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([(0,S.DJ)(),(0,S.Wv)()]);console.log("Fetched snapshots:",e.length,e.slice(0,3)),A(e),E(t)}catch(e){console.error("Failed to load data",e)}})()},[]);let z=(0,a.useMemo)(()=>o.filter(e=>c.includes(e.account_id||"")),[o,c]),I=(0,a.useMemo)(()=>z.reduce((e,t)=>({playCount:e.playCount+t.play_count,diggCount:e.diggCount+t.digg_count,commentCount:e.commentCount+t.comment_count,shareCount:e.shareCount+t.share_count,collectCount:e.collectCount+(t.collect_count||0)}),{playCount:0,diggCount:0,commentCount:0,shareCount:0,collectCount:0}),[z]),[T,R]=(0,a.useState)(null),O=(0,a.useRef)(null),[P,H]=(0,a.useState)(null),V=async(e,t)=>{let n=s.find(t=>t.username===e);if(n){R({selectedAccounts:[...c],timeRange:m,currentMetric:u}),d([n.id]);let a=C.find(e=>e.account_id===n.id&&e.date===t),s={views:5e3,likes:500,comments:50,shares:20};if(a){let e=C.filter(e=>e.account_id===n.id).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),r=e.findIndex(e=>e.date===t);if(r>0){let t=e[r-1];s={views:Math.max(0,a.total_views-t.total_views),likes:Math.max(0,a.total_likes-t.total_likes),comments:Math.max(0,a.total_comments-t.total_comments),shares:Math.max(0,a.total_shares-t.total_shares)}}}try{let{fetchDailyVideoBreakdown:a}=await Promise.resolve().then(r.bind(r,2958)),o=await a(n.id,t,s);H({date:t,username:e,videos:o}),console.log("Drilling down to account: ".concat(e," on date: ").concat(t),o)}catch(e){console.error("Failed to fetch breakdown",e)}}},[B,F]=(0,a.useState)("daily"),[W,G]=(0,a.useState)(!0),[U,$]=(0,a.useState)(null),[Q,Y]=(0,a.useState)("chart");return(0,n.jsxs)("div",{className:"min-h-screen bg-[#050505] text-white font-sans selection:bg-cyan-500/30",children:[(0,n.jsxs)("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[(0,n.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-900/10 rounded-full blur-[120px]"}),(0,n.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-cyan-900/10 rounded-full blur-[120px]"})]}),(0,n.jsxs)("div",{className:"relative z-10 flex h-screen overflow-hidden",children:[(0,n.jsx)(h,{accounts:s,selectedAccounts:c,onToggleAccount:e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onToggleAll:()=>{d(c.length===s.length?[]:s.map(e=>e.id))},videos:o,hoveredAccount:U,onAccountHover:$,groups:D,onOpenGroupManager:()=>L(!0),onSelectGroup:e=>{let t=D.find(t=>t.id===e);(null==t?void 0:t.members)&&(t.members.every(e=>c.includes(e))?d(e=>e.filter(e=>!t.members.includes(e))):d(e=>Array.from(new Set([...e,...t.members]))))}}),(0,n.jsxs)("main",{className:"flex-1 flex flex-col min-w-0 h-full p-6 gap-6 overflow-y-auto custom-scrollbar",children:[(0,n.jsx)(l,{sessionId:t,onLogout:i}),(0,n.jsxs)("div",{className:"glass-panel p-6 rounded-xl flex flex-col min-h-0 relative group h-[650px] shrink-0",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-xl pointer-events-none"}),(0,n.jsxs)("div",{className:"flex justify-between items-start mb-4 z-10",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-3",children:[(0,n.jsx)("span",{className:"w-1.5 h-8 bg-cyan-400 rounded-full shadow-[0_0_15px_#22d3ee]"}),"PERFORMANCE METRICS"]}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-mono uppercase tracking-wider",children:"daily traffic analysis"})]}),(0,n.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,n.jsxs)("div",{className:"flex gap-1 bg-black/40 p-1 rounded-lg border border-white/5",children:[(0,n.jsx)("button",{onClick:()=>Y("chart"),className:"px-2 py-1 text-xs font-mono rounded transition-all ".concat("chart"===Q?"bg-white/10 text-cyan-400":"text-gray-500 hover:text-gray-300"),title:"Combined Chart",children:"\uD83D\uDCC8"}),(0,n.jsx)("button",{onClick:()=>Y("grid"),className:"px-2 py-1 text-xs font-mono rounded transition-all ".concat("grid"===Q?"bg-white/10 text-cyan-400":"text-gray-500 hover:text-gray-300"),title:"Small Multiples Grid",children:"⊞"})]}),"chart"===Q&&(0,n.jsx)("button",{onClick:()=>G(!W),className:"px-3 py-1.5 text-xs font-mono rounded-md border transition-all ".concat(W?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400":"bg-black/40 border-white/10 text-gray-500 hover:text-gray-300"),children:W?"⊕ AVG":"≡ ALL"}),(0,n.jsx)("div",{className:"flex gap-1 bg-black/40 p-1 rounded-lg border border-white/5",children:["3D","7D","30D","90D"].map(e=>(0,n.jsx)("button",{onClick:()=>p(e),className:"px-3 py-1.5 text-xs font-mono rounded-md transition-all ".concat(m===e?"bg-white/10 text-cyan-400 shadow-[0_0_10px_rgba(34,211,238,0.2)]":"text-gray-500 hover:text-gray-300"),children:e},e))})]})]}),!P&&(0,n.jsx)(f,{totals:I,currentMetric:u,onSelectMetric:x}),(0,n.jsx)("div",{className:"flex-1 w-full mt-4 relative z-10 min-h-0 ".concat(P?"h-full":""),children:P?(0,n.jsx)(w,{date:P.date,username:P.username,videos:P.videos,onBack:()=>{H(null),T&&(d(T.selectedAccounts),p(T.timeRange),x(T.currentMetric),R(null))}}):"grid"===Q?(0,n.jsx)(b,{snapshots:C,accounts:s,selectedAccounts:c,currentMetric:u,timeRange:m,viewMode:B,onAccountClick:e=>{d([e]),Y("chart")}}):(0,n.jsx)(g,{snapshots:C,accounts:s,selectedAccounts:c,currentMetric:u,timeRange:m,onDataClick:V,viewMode:B,showAverage:W&&c.length>2,hoveredAccount:U,onAccountHover:$})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-6 h-[280px] shrink-0",children:[(0,n.jsxs)("div",{className:"col-span-4 glass-panel p-4 rounded-xl flex flex-col min-h-0",children:[(0,n.jsx)("h3",{className:"text-xs font-bold text-gray-400 mb-3 uppercase tracking-widest",children:"Traffic Share"}),(0,n.jsx)(N,{videos:z,accounts:s,selectedAccounts:c,currentMetric:u})]}),(0,n.jsxs)("div",{className:"col-span-4 glass-panel p-4 rounded-xl flex flex-col min-h-0",children:[(0,n.jsx)("h3",{className:"text-xs font-bold text-gray-400 mb-3 uppercase tracking-widest",children:"Top Performing"}),(0,n.jsx)(y,{videos:z,accounts:s,currentMetric:u,onVideoClick:e=>window.open(e,"_blank")})]}),(0,n.jsxs)("div",{className:"col-span-4 glass-panel p-4 rounded-xl flex flex-col min-h-0",children:[(0,n.jsx)("h3",{className:"text-xs font-bold text-gray-400 mb-3 uppercase tracking-widest",children:"Hot Hashtags"}),(0,n.jsx)(j,{videos:z})]})]}),(0,n.jsxs)("div",{className:"glass-panel p-4 rounded-xl flex flex-col min-h-0 h-[280px] shrink-0",children:[(0,n.jsx)("h3",{className:"text-xs font-bold text-gray-400 mb-3 uppercase tracking-widest",children:"Impact Scatter Analysis"}),(0,n.jsx)(v,{videos:z,accounts:s,onVideoClick:e=>window.open(e,"_blank")})]}),(0,n.jsx)("div",{ref:O,className:"h-[400px] shrink-0",children:(0,n.jsx)(k,{videos:z,accounts:s})})]})]}),(0,n.jsx)(_,{accounts:s,isOpen:M,onClose:()=>L(!1),onGroupsChange:E})]})}let D=[{id:"1",username:"digipark_official",nickname:"DigiPark",avatar_url:null,follower_count:125e3,following_count:250,heart_count:25e5,video_count:85,signature:"Digital Innovation Hub",is_active:!0,last_synced_at:new Date().toISOString(),created_at:new Date().toISOString()},{id:"2",username:"tech_trends_daily",nickname:"Tech Trends",avatar_url:null,follower_count:89e3,following_count:120,heart_count:18e5,video_count:120,signature:"Your daily dose of tech",is_active:!0,last_synced_at:new Date().toISOString(),created_at:new Date().toISOString()},{id:"3",username:"future_creators",nickname:"Future Creators",avatar_url:null,follower_count:156e3,following_count:180,heart_count:32e5,video_count:95,signature:"Creating the future",is_active:!0,last_synced_at:new Date().toISOString(),created_at:new Date().toISOString()}];function E(){let e=["Check out this amazing tech innovation! \uD83D\uDE80 #tech #innovation","The future is here and it looks incredible ✨ #future #ai","You wont believe what we built today \uD83D\uDD25 #coding #dev","This changed everything for our workflow \uD83D\uDCA1 #productivity","Behind the scenes at DigiPark HQ \uD83C\uDFAC #behindthescenes","New feature drop! Let us know what you think \uD83D\uDC47 #newfeature","The response has been incredible! Thank you all \uD83D\uDE4F #grateful","Tutorial: How to build this in 5 minutes ⏱️ #tutorial","We did not expect this to go viral \uD83E\uDD2F #viral","Day in the life of a tech creator \uD83D\uDCF1 #dayinthelife"],t=[["tech","innovation","startup"],["future","ai","ml"],["coding","dev","programming"],["productivity","workflow","tips"],["behindthescenes","vlog","office"],["newfeature","update","launch"],["grateful","community","thankyou"],["tutorial","howto","learn"],["viral","trending","fyp"],["dayinthelife","lifestyle","tech"]],r=[],n=Date.now();return D.forEach((a,s)=>{for(let o=0;o<15;o++){let l=(5*s+o)%e.length,i=new Date(n-864e5*Math.floor(30*Math.random()));r.push({id:"video-".concat(a.id,"-").concat(o),video_id:"".concat(a.id).concat(o).concat(Date.now()),account_id:a.id,description:e[l],play_count:Math.floor(5e5*Math.random())+1e4,digg_count:Math.floor(5e4*Math.random())+1e3,comment_count:Math.floor(2e3*Math.random())+50,share_count:Math.floor(5e3*Math.random())+100,collect_count:Math.floor(3e3*Math.random())+50,duration:Math.floor(60*Math.random())+10,cover_url:null,video_url:null,web_video_url:"https://www.tiktok.com/@".concat(a.username,"/video/").concat(a.id).concat(o),hashtags:t[l],music_name:"Original Sound",music_author:a.username,create_time:i.toISOString(),is_ad:!1,is_pinned:0===o,created_at:i.toISOString(),updated_at:new Date().toISOString()})}}),r}function M(){let[e,t]=(0,a.useState)("landing"),[r,l]=(0,a.useState)("");(0,a.useEffect)(()=>{l(Math.random().toString(36).substring(2,8).toUpperCase())},[]);let[i,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(!1),m=async()=>{h(!0);try{let[e,t]=await Promise.all([(0,S.pO)(),(0,S.WI)()]);e.length>0&&t.length>0?(c(e),u(t)):(c(D),u(E()))}catch(e){console.error("Error fetching data:",e),c(D),u(E())}t("dashboard"),h(!1)};return(0,n.jsxs)("main",{className:"relative z-10 w-full min-h-screen flex flex-col",children:["landing"===e&&(0,n.jsx)(o,{sessionId:r,onStart:m}),"dashboard"===e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s,{}),(0,n.jsx)(A,{sessionId:r,accounts:i,videos:d,onLogout:()=>{t("landing")}})]})]})}}},function(e){e.O(0,[200,971,117,744],function(){return e(e.s=1355)}),_N_E=e.O()}]);